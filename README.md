# integration-education
Практическое занятие №4 - Обзор платформ (Apache Camel, MuleSoft, RabbitMQ). Практика использования сообщений брокеров и данных о визитах
Введение в проблему В современной цифровой экосистеме предприятия редко существуют изолированные системы. Типичная организация сегодня использует десятки различных приложений — от недавних ERP-систем до облачных микросервисов. Возникает ключевой вопрос: как обеспечить их отлаженное взаимодействие без создания хрупких точечных интеграций? Именно на этой занятии мы будем осваивать профессиональный подход к проектированию надежных интеграционных решений.

Теоретические основы При проектировании интеграционной структуры перед нами открываются два принципиальных различия, но дополняют друг друга другие возможности. Первый — это использование Enterprise Service Bus (ESB), представляющего собой централизованную «шину» для трансформации и маршрутизации сообщений. Второе — применение брокеров сообщений, организующих асинхронное взаимодействие между последовательностями через очередь.

ESB-решения вроде Apache Camel или MuleSoft особенно эффективны в протоколах, где требуется сложная обработка сообщений: преобразование форматов (например, XML в JSON), обогащение данных, маршрутизация по бизнес-правилам. Они выполняются как своеобразные «переводчики» между разными цепями, уменьшая количество прямых соединений между компонентами конструкции.

Брокеры сообщений (RabbitMQ, Apache Kafka) решают вторую задачу — они обеспечивают надежную асинхронную связь. Когда система А отправляет сообщение системе Б через брокера, ей не нужно ждать ответа — сообщение будет доставлено, даже если система Б временно недоступна. Это особенно критично для событийно-ориентированной архитектуры и обработки пиковых представлений.

Ключи к практическому рассмотрению реальной ситуации в розничной торговле. Сеть супермаркетов внедряет новую цифровую экосистему, включающую:

Мобильное приложение для покупателей
Кассовая система на базе 1С
CRM-система Salesforce
Систему складского учета WMS
Аналитическая платформа на Hadoop
Практическое задание вашей задачи — создать аварийное решение, обеспечивающее:

Мгновенное обновление балансовой бонусной программы при игре в кассу
Асинхронную передачу данных о покупках в CRM и аналитику
Интеграция с системой складского учета для контроля остатков
For execution:

Определите, какие взаимодействия должны быть синхронными, а какие — асинхронными.
Выберите подходящую технологию (ESB и/или сообщения брокера) для каждого протокола.
Прогнозируйте потенциальные узкие места
Опишите схему обработки ошибок
Пример решения бонусного бонуса для системы «Обновление баланса при графике требует синхронного взаимодействия между кассовой системой и CRM, так как кассир должен видеть актуальный статус в момент оплаты. Однако для этого не следует создавать прямое соединение 1С-Salesforce. Лучше использовать ESB (например, MuleSoft) в качестве промежуточного слоя, который:

Примет SOAP-запрос от 1С
Преобразует его в формат REST, понятный Salesforce.
Обрабатывает возможные ошибки (например, если CRM недоступен)
Вернет унифицированный ответ на кассу
При этом передача данных о покупках в аналитическую систему должна быть асинхронной через Kafka, так как:

Допустима задержка обработки
Требуется высокая пропускная способность в пик часов
Возможна пакетная обработка на стороне Hadoop"
Типичные ошибки проектирования. В процессе разбора решений особое внимание уделяется распространенным ошибкам:

Использование ESB там, где достаточно простая очередь сообщений
Опыты решения всех интеграционных задач с помощью одного инструмента
Недооценка требований к отказоустойчивости
Игнорирование вопросов интеграционных потоков
Заключительная дискуссия По итогам занятия проведет сравнительный анализ представленных решений, обращая внимание на:

Соответствие бизнес-требованиям
Запас масштабируемости
Удобство сопровождения
Общую стоимость владения элегантным
Домашнее задание Спроектируйте интеграционную платформу для банка, где необходимо связаться:

Основную банковскую систему (мэйнфрейм IBM)
Мобильное приложение
Систему скоринга
Регуляторную отчетность
Укажите для каждого интеграционного потока:

применяемое применение
Ожидаемую нагрузку
Требования к надежности
Механизмы обработки ошибок
